## ?    $$\mathrm{Tr}\left(A^\top B\right)=\sum_{i=1}^{m}\sum_{j=1}^{n} A_{ij} B_{ij}$$

$$
(A^\top B)_{k\ell}
=\sum_{i=1}^{m}(A^\top)_{ki}B_{i\ell}
=\sum_{i=1}^{m} A_{ik}B_{i\ell}
$$

$$
(A^\top B)_{kk}
=\sum_{i=1}^{m} A_{ik}B_{ik}
$$

$$
\mathrm{Tr}\left(A^\top B\right)
=\sum_{k=1}^{n}(A^\top B)_{kk}
=\sum_{k=1}^{n}\sum_{i=1}^{m} A_{ik}B_{ik}
$$

$$
\mathrm{Tr}\left(A^\top B\right)
=\sum_{i=1}^{m}\sum_{k=1}^{n} A_{ik}B_{ik}
=\sum_{i=1}^{m}\sum_{j=1}^{n} A_{ij}B_{ij}
$$

## ?    $$\sigma(x)=\frac{1}{1+e^{-x}}=(1+e^{-x})^{-1}$$

$$
\frac{d}{dx}(1+e^{-x})^{-1}
= -1\cdot(1+e^{-x})^{-2}\cdot\frac{d}{dx}(1+e^{-x})
$$

$$
\frac{d}{dx}(1+e^{-x})=-e^{-x}
$$

$$
\frac{d\sigma}{dx}
= -(1+e^{-x})^{-2}\cdot(-e^{-x})
= \frac{e^{-x}}{(1+e^{-x})^{2}}
$$

$$
\sigma(x)=\frac{1}{1+e^{-x}},\qquad
1-\sigma(x)=1-\frac{1}{1+e^{-x}}
=\frac{1+e^{-x}-1}{1+e^{-x}}
=\frac{e^{-x}}{1+e^{-x}}
$$

$$
\sigma(x)\bigl(1-\sigma(x)\bigr)
=\frac{1}{1+e^{-x}}\cdot\frac{e^{-x}}{1+e^{-x}}
=\frac{e^{-x}}{(1+e^{-x})^{2}}
=\frac{d\sigma}{dx}
$$

$$
\boxed{\frac{d\sigma}{dx}=\sigma(x)\bigl(1-\sigma(x)\bigr)}
$$

## (one_hot)   $\frac{\partial\mathcal{L}}{\partial z_k}$?    $\mathrm{L} = \log\sum_{j}e^{z_{j}} - z_{y}$


$$
\mathcal{S} = \sum_{j}e^{z_j}
$$
$$
\frac{\partial\mathcal{S}}{\partial z_k} = \sum_{j}\frac{\partial}{\partial z_k}e^{z_j} = \sum_{j}(e^{z_j}\cdot\mathbf[j=k]) = e^{z_k}
$$
$$
\frac{\partial\mathcal{L}}{\partial z_k} = \frac{1}{\sum_{j}e^{z_j}}\cdot e^z{k} - \mathbf[j=k]
$$

## (smoothed)   $\frac{\partial\mathcal{L}}{\partial z_k}$?     $\mathcal{L}(z) = \log\sum_{j}e^{z_j} - (1 - \epsilon)z_y - \frac{\epsilon}{\mathcal{C}}\sum_{j}z_j

$$
\frac{\partial\mathcal{L}}{\partial z_k} = \frac{e_{z_k}}{\sum_{j}e^{z_j}} - (1 - \epsilon)\delta_{k,y} - \frac{\epsilon}{mathcal{C}}
$$